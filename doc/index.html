<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-DBF">DBF</h1>

<p><a href="https://rubygems.org/gems/dbf"><img src="https://img.shields.io/gem/v/dbf.svg?style=flat"></a> <a href="https://github.com/infused/dbf/actions/workflows/build.yml"><img src="https://github.com/infused/dbf/actions/workflows/build.yml/badge.svg"></a> <a href="https://codeclimate.com/github/infused/dbf"><img src="https://img.shields.io/codeclimate/maintainability/infused/dbf.svg?style=flat"></a> <a href="https://codeclimate.com/github/infused/dbf"><img src="https://img.shields.io/codeclimate/c/infused/dbf.svg?style=flat"></a> <a href="https://rubygems.org/gems/dbf/"><img src="https://img.shields.io/gem/dt/dbf.svg"></a> <a href="https://github.com/infused/dbf"><img src="https://img.shields.io/github/license/infused/dbf.svg"></a></p>

<p>DBF is a small, fast Ruby library for reading dBase, xBase, Clipper, and FoxPro database files.</p>
<ul><li>
<p>Project page: <a href="https://github.com/infused/dbf">github.com/infused/dbf</a></p>
</li><li>
<p>API Documentation: <a href="https://rubydoc.info/github/infused/dbf">rubydoc.info/github/infused/dbf</a></p>
</li><li>
<p>Report bugs: <a href="https://github.com/infused/dbf/issues">github.com/infused/dbf/issues</a></p>
</li><li>
<p>Questions: Email <a href="mailto:keithm@infused.org">keithm@infused.org</a> and put DBF somewhere in the subject line</p>
</li><li>
<p>Change log: <a href="https://github.com/infused/dbf/blob/master/CHANGELOG.md">github.com/infused/dbf/blob/master/CHANGELOG.md</a></p>
</li></ul>

<p>NOTE:</p>

<p>NOTE: Beginning with version 4, we have dropped support for Ruby 2.0, 2.1, 2.2, and 2.3. If you need support for these older Rubies, please use 3.0.x (<a href="https://github.com/infused.org/dbf/tree/3_stable">github.com/infused.org/dbf/tree/3_stable</a>)</p>

<p>NOTE: Beginning with version 3, we have dropped support for Ruby 1.8 and 1.9. If you need support for older Rubies, please use 2.0.x (<a href="https://github.com/infused/dbf/tree/2_stable">github.com/infused/dbf/tree/2_stable</a>)</p>

<h2 id="label-Compatibility">Compatibility</h2>

<p>DBF is tested to work with the following versions of Ruby:</p>
<ul><li>
<p>Ruby 3.0.x, 3.1.x, 3.2.x, 3.3.x</p>
</li></ul>

<h2 id="label-Installation">Installation</h2>

<p>Install the gem manually:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='id identifier rubyid_install'>install</span> <span class='id identifier rubyid_dbf'>dbf</span>
</code></pre>

<p>Or add to your Gemfile:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dbf</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<h2 id="label-Basic+Usage">Basic Usage</h2>

<p>Open a DBF file using a path:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dbf</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_widgets'>widgets</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="DBF.html" title="DBF (module)">DBF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="DBF/Table.html" title="DBF::Table (class)">Table</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="DBF/Table.html#initialize-instance_method" title="DBF::Table#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>widgets.dbf</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<p>Open a DBF file using an IO object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>widgets.dbf</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_widgets'>widgets</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="DBF.html" title="DBF (module)">DBF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="DBF/Table.html" title="DBF::Table (class)">Table</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="DBF/Table.html#initialize-instance_method" title="DBF::Table#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
</code></pre>

<p>Open a DBF by passing in raw data (wrap the raw data with StringIO):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_widgets'>widgets</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="DBF.html" title="DBF (module)">DBF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="DBF/Table.html" title="DBF::Table (class)">Table</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="DBF/Table.html#initialize-instance_method" title="DBF::Table#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>raw binary data</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
</code></pre>

<p>Enumerate all records</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_widgets'>widgets</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_email'>email</span>
<span class='kw'>end</span>
</code></pre>

<p>Find a single record</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_widget'>widget</span> <span class='op'>=</span> <span class='id identifier rubyid_widgets'>widgets</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='int'>6</span><span class='rparen'>)</span>
</code></pre>

<p>Note that find() will return nil if the requested record has been deleted and not yet pruned from the database.</p>

<p>The value for an attribute can be accessed via element reference in several ways.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_widget'>widget</span><span class='period'>.</span><span class='id identifier rubyid_slot_number'>slot_number</span>     <span class='comment'># underscored field name as method
</span>
<span class='id identifier rubyid_widget'>widget</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SlotNumber</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>   <span class='comment'># original field name in dbf file
</span><span class='id identifier rubyid_widget'>widget</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>slot_number</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>  <span class='comment'># underscored field name string
</span><span class='id identifier rubyid_widget'>widget</span><span class='lbracket'>[</span><span class='symbol'>:slot_number</span><span class='rbracket'>]</span>   <span class='comment'># underscored field name symbol
</span></code></pre>

<p>Get a hash of all attributes. The keys are the original column names.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_widget'>widget</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span>
<span class='comment'># =&gt; {&quot;Name&quot; =&gt; &quot;Thing1 | SlotNumber&quot; =&gt; 1}
</span></code></pre>

<p>Search for records using a simple hash format. Multiple search criteria are ANDed. Use the block form if the resulting record set is too big. Otherwise, all records are loaded into memory.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># find all records with slot_number equal to s42
</span><span class='id identifier rubyid_widgets'>widgets</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='symbol'>:all</span><span class='comma'>,</span> <span class='label'>slot_number:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s42</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_widget'>widget</span><span class='op'>|</span>
  <span class='comment'># the record will be nil if deleted, but not yet pruned from the database
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_widget'>widget</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_widget'>widget</span><span class='period'>.</span><span class='id identifier rubyid_serial_number'>serial_number</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='comment'># find the first record with slot_number equal to s42
</span><span class='id identifier rubyid_widgets'>widgets</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='symbol'>:first</span><span class='comma'>,</span> <span class='label'>slot_number:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>s42</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># find record number 10
</span><span class='id identifier rubyid_widgets'>widgets</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span>
</code></pre>

<h2 id="label-Enumeration">Enumeration</h2>

<p>DBF::Table is a Ruby Enumerable, so you get several traversal, search, and sort methods for free. For example, let’s get only records created before January 1st, 2015:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_widgets'>widgets</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span> <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_created_date'>created_date</span> <span class='op'>&lt;</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>2015</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
</code></pre>

<p>Or custom sorting:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_widgets'>widgets</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='op'>|</span> <span class='id identifier rubyid_w'>w</span><span class='period'>.</span><span class='id identifier rubyid_created_date'>created_date</span> <span class='rbrace'>}</span>
</code></pre>

<h2 id="label-Encodings+-28Code+Pages-29">Encodings (Code Pages)</h2>

<p>dBase supports encoding non-english characters with different character sets. Unfortunately, the character set used may not be set explicitly. In that case, you will have to specify it manually. For example, if you know the dbf file is encoded with ‘Russian OEM’:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_table'>table</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="DBF.html" title="DBF (module)">DBF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="DBF/Table.html" title="DBF::Table (class)">Table</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="DBF/Table.html#initialize-instance_method" title="DBF::Table#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dbf/books.dbf</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cp866</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>

<table role="table">
<thead>
<tr>
<th>Code Page</th>
<th>Encoding</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>cp437</td>
<td>U.S. MS–DOS</td>
</tr>
<tr>
<td>02</td>
<td>cp850</td>
<td>International MS–DOS</td>
</tr>
<tr>
<td>03</td>
<td>cp1252</td>
<td>Windows ANSI</td>
</tr>
<tr>
<td>08</td>
<td>cp865</td>
<td>Danish OEM</td>
</tr>
<tr>
<td>09</td>
<td>cp437</td>
<td>Dutch OEM</td>
</tr>
<tr>
<td>0a</td>
<td>cp850</td>
<td>Dutch OEM*</td>
</tr>
<tr>
<td>0b</td>
<td>cp437</td>
<td>Finnish OEM</td>
</tr>
<tr>
<td>0d</td>
<td>cp437</td>
<td>French OEM</td>
</tr>
<tr>
<td>0e</td>
<td>cp850</td>
<td>French OEM*</td>
</tr>
<tr>
<td>0f</td>
<td>cp437</td>
<td>German OEM</td>
</tr>
<tr>
<td>10</td>
<td>cp850</td>
<td>German OEM*</td>
</tr>
<tr>
<td>11</td>
<td>cp437</td>
<td>Italian OEM</td>
</tr>
<tr>
<td>12</td>
<td>cp850</td>
<td>Italian OEM*</td>
</tr>
<tr>
<td>13</td>
<td>cp932</td>
<td>Japanese Shift-JIS</td>
</tr>
<tr>
<td>14</td>
<td>cp850</td>
<td>Spanish OEM*</td>
</tr>
<tr>
<td>15</td>
<td>cp437</td>
<td>Swedish OEM</td>
</tr>
<tr>
<td>16</td>
<td>cp850</td>
<td>Swedish OEM*</td>
</tr>
<tr>
<td>17</td>
<td>cp865</td>
<td>Norwegian OEM</td>
</tr>
<tr>
<td>18</td>
<td>cp437</td>
<td>Spanish OEM</td>
</tr>
<tr>
<td>19</td>
<td>cp437</td>
<td>English OEM (Britain)</td>
</tr>
<tr>
<td>1a</td>
<td>cp850</td>
<td>English OEM (Britain)*</td>
</tr>
<tr>
<td>1b</td>
<td>cp437</td>
<td>English OEM (U.S.)</td>
</tr>
<tr>
<td>1c</td>
<td>cp863</td>
<td>French OEM (Canada)</td>
</tr>
<tr>
<td>1d</td>
<td>cp850</td>
<td>French OEM*</td>
</tr>
<tr>
<td>1f</td>
<td>cp852</td>
<td>Czech OEM</td>
</tr>
<tr>
<td>22</td>
<td>cp852</td>
<td>Hungarian OEM</td>
</tr>
<tr>
<td>23</td>
<td>cp852</td>
<td>Polish OEM</td>
</tr>
<tr>
<td>24</td>
<td>cp860</td>
<td>Portuguese OEM</td>
</tr>
<tr>
<td>25</td>
<td>cp850</td>
<td>Portuguese OEM*</td>
</tr>
<tr>
<td>26</td>
<td>cp866</td>
<td>Russian OEM</td>
</tr>
<tr>
<td>37</td>
<td>cp850</td>
<td>English OEM (U.S.)*</td>
</tr>
<tr>
<td>40</td>
<td>cp852</td>
<td>Romanian OEM</td>
</tr>
<tr>
<td>4d</td>
<td>cp936</td>
<td>Chinese GBK (PRC)</td>
</tr>
<tr>
<td>4e</td>
<td>cp949</td>
<td>Korean (ANSI/OEM)</td>
</tr>
<tr>
<td>4f</td>
<td>cp950</td>
<td>Chinese Big5 (Taiwan)</td>
</tr>
<tr>
<td>50</td>
<td>cp874</td>
<td>Thai (ANSI/OEM)</td>
</tr>
<tr>
<td>57</td>
<td>cp1252</td>
<td>ANSI</td>
</tr>
<tr>
<td>58</td>
<td>cp1252</td>
<td>Western European ANSI</td>
</tr>
<tr>
<td>59</td>
<td>cp1252</td>
<td>Spanish ANSI</td>
</tr>
<tr>
<td>64</td>
<td>cp852</td>
<td>Eastern European MS–DOS</td>
</tr>
<tr>
<td>65</td>
<td>cp866</td>
<td>Russian MS–DOS</td>
</tr>
<tr>
<td>66</td>
<td>cp865</td>
<td>Nordic MS–DOS</td>
</tr>
<tr>
<td>67</td>
<td>cp861</td>
<td>Icelandic MS–DOS</td>
</tr>
<tr>
<td>6a</td>
<td>cp737</td>
<td>Greek MS–DOS (437G)</td>
</tr>
<tr>
<td>6b</td>
<td>cp857</td>
<td>Turkish MS–DOS</td>
</tr>
<tr>
<td>6c</td>
<td>cp863</td>
<td>French–Canadian MS–DOS</td>
</tr>
<tr>
<td>78</td>
<td>cp950</td>
<td>Taiwan Big 5</td>
</tr>
<tr>
<td>79</td>
<td>cp949</td>
<td>Hangul (Wansung)</td>
</tr>
<tr>
<td>7a</td>
<td>cp936</td>
<td>PRC GBK</td>
</tr>
<tr>
<td>7b</td>
<td>cp932</td>
<td>Japanese Shift-JIS</td>
</tr>
<tr>
<td>7c</td>
<td>cp874</td>
<td>Thai Windows/MS–DOS</td>
</tr>
<tr>
<td>86</td>
<td>cp737</td>
<td>Greek OEM</td>
</tr>
<tr>
<td>87</td>
<td>cp852</td>
<td>Slovenian OEM</td>
</tr>
<tr>
<td>88</td>
<td>cp857</td>
<td>Turkish OEM</td>
</tr>
<tr>
<td>c8</td>
<td>cp1250</td>
<td>Eastern European Windows</td>
</tr>
<tr>
<td>c9</td>
<td>cp1251</td>
<td>Russian Windows</td>
</tr>
<tr>
<td>ca</td>
<td>cp1254</td>
<td>Turkish Windows</td>
</tr>
<tr>
<td>cb</td>
<td>cp1253</td>
<td>Greek Windows</td>
</tr>
<tr>
<td>cc</td>
<td>cp1257</td>
<td>Baltic Windows</td>
</tr>
</tbody>
</table>

<h2 id="label-Migrating+to+ActiveRecord">Migrating to ActiveRecord</h2>

<p>An example of migrating a DBF book table to ActiveRecord using a migration:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dbf</span><span class='tstring_end'>&#39;</span></span>

<span class='kw'>class</span> <span class='const'>Book</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='semicolon'>;</span> <span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>CreateBooks</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Migration</span>
  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_up'>up</span>
    <span class='id identifier rubyid_table'>table</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="DBF.html" title="DBF (module)">DBF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="DBF/Table.html" title="DBF::Table (class)">Table</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="DBF/Table.html#initialize-instance_method" title="DBF::Table#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>db/dbf/books.dbf</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_schema'>schema</span><span class='rparen'>)</span>

    <span class='const'>Book</span><span class='period'>.</span><span class='id identifier rubyid_reset_column_information'>reset_column_information</span>
    <span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
      <span class='const'>Book</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='label'>title:</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='label'>author:</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_author'>author</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_down'>down</span>
    <span class='id identifier rubyid_drop_table'>drop_table</span> <span class='symbol'>:books</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>If you have initialized the DBF::Table with raw data, you will need to set the exported table name manually:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_table_name</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<h2 id="label-Migrating+to+Sequel">Migrating to Sequel</h2>

<p>An example of migrating a DBF book table to Sequel using a migration:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dbf</span><span class='tstring_end'>&#39;</span></span>

<span class='kw'>class</span> <span class='const'>Book</span> <span class='op'>&lt;</span> <span class='const'>Sequel</span><span class='op'>::</span><span class='const'>Model</span><span class='semicolon'>;</span> <span class='kw'>end</span>

<span class='const'>Sequel</span><span class='period'>.</span><span class='id identifier rubyid_migration'>migration</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_up'>up</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_table'>table</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="DBF.html" title="DBF (module)">DBF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="DBF/Table.html" title="DBF::Table (class)">Table</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="DBF/Table.html#initialize-instance_method" title="DBF::Table#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>db/dbf/books.dbf</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_schema'>schema</span><span class='lparen'>(</span><span class='symbol'>:sequel</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='comment'># passing true to limit output to create_table() only
</span>
    <span class='const'>Book</span><span class='period'>.</span><span class='id identifier rubyid_reset_column_information'>reset_column_information</span>
    <span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_record'>record</span><span class='op'>|</span>
      <span class='const'>Book</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='label'>title:</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='label'>author:</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_author'>author</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_down'>down</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_drop_table'>drop_table</span><span class='lparen'>(</span><span class='symbol'>:books</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>If you have initialized the DBF::Table with raw data, you will need to set the exported table name manually:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_table_name</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<h2 id="label-Command-line+utility">Command-line utility</h2>

<p>A small command-line utility called dbf is installed with the gem.</p>

<pre class="code ruby"><code class="ruby">$ dbf -h
usage: dbf [-h|-s|-a] filename
  -h = print this message
  -v = print the version number
  -s = print summary information
  -a = create an ActiveRecord::Schema
  -r = create a Sequel Migration
  -c = export as CSV
</code></pre>

<p>Create an executable ActiveRecord schema:</p>

<pre class="code ruby"><code class="ruby">dbf -a books.dbf &gt; books_schema.rb
</code></pre>

<p>Create an executable Sequel schema:</p>

<pre class="code ruby"><code class="ruby">dbf -r books.dbf &gt; migrate/001_create_books.rb
</code></pre>

<p>Dump all records to a CSV file:</p>

<pre class="code ruby"><code class="ruby">dbf -c books.dbf &gt; books.csv
</code></pre>

<h2 id="label-Reading+a+Visual+Foxpro+database+-28v8-2C+v9-29">Reading a Visual Foxpro database (v8, v9)</h2>

<p>A special Database::Foxpro class is available to read Visual Foxpro container files (file with .dbc extension). When using this class, long field names are supported, and tables can be referenced without using names.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dbf</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_contacts'>contacts</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="DBF.html" title="DBF (module)">DBF</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="DBF/Database.html" title="DBF::Database (module)">Database</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="DBF/Database/Foxpro.html" title="DBF::Database::Foxpro (class)">Foxpro</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="DBF/Database/Foxpro.html#initialize-instance_method" title="DBF::Database::Foxpro#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>contact_database.dbc</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_contacts'>contacts</span>
<span class='id identifier rubyid_my_contact'>my_contact</span> <span class='op'>=</span> <span class='id identifier rubyid_contacts'>contacts</span><span class='period'>.</span><span class='id identifier rubyid_record'>record</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_spouses_interests'>spouses_interests</span>
</code></pre>

<h2 id="label-dBase+version+compatibility">dBase version compatibility</h2>

<p>The basic dBase data types are generally supported well. Support for the advanced data types in dBase V and FoxPro are still experimental or not supported. If you have insight into how any of the unsupported data types are implemented, please open an issue on Github. FoxBase/dBase II files are not supported at this time.</p>

<h3 id="label-Supported+data+types+by+dBase+version">Supported data types by dBase version</h3>

<table role="table">
<thead>
<tr>
<th>Version</th>
<th>Description</th>
<th>C</th>
<th>N</th>
<th>L</th>
<th>D</th>
<th>M</th>
<th>F</th>
<th>B</th>
<th>G</th>
<th>P</th>
<th>Y</th>
<th>T</th>
<th>I</th>
<th>V</th>
<th>X</th>
<th>@</th>
<th>O</th>
<th>+</th>
</tr>
</thead>
<tbody>
<tr>
<td>02</td>
<td>FoxBase</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>03</td>
<td>dBase III without memo file</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>04</td>
<td>dBase IV without memo file</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>05</td>
<td>dBase V without memo file</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>07</td>
<td>Visual Objects 1.x</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>30</td>
<td>Visual FoxPro</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>-</td>
</tr>
<tr>
<td>31</td>
<td>Visual FoxPro with AutoIncrement</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>32</td>
<td>Visual FoxPro with field type Varchar or Varbinary</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>7b</td>
<td>dBase IV with memo file</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>83</td>
<td>dBase III with memo file</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>87</td>
<td>Visual Objects 1.x with memo file</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>8b</td>
<td>dBase IV with memo file</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>N</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>8e</td>
<td>dBase IV with SQL table</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>N</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>f5</td>
<td>FoxPro with memo file</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>fb</td>
<td>FoxPro without memo file</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>N</td>
</tr>
</tbody>
</table>

<p>Data type descriptions</p>
<ul><li>
<p>C = Character</p>
</li><li>
<p>N = Number</p>
</li><li>
<p>L = Logical</p>
</li><li>
<p>D = Date</p>
</li><li>
<p>M = Memo</p>
</li><li>
<p>F = Float</p>
</li><li>
<p>B = Binary</p>
</li><li>
<p>G = General</p>
</li><li>
<p>P = Picture</p>
</li><li>
<p>Y = Currency</p>
</li><li>
<p>T = DateTime</p>
</li><li>
<p>I = Integer</p>
</li><li>
<p>V = VariField</p>
</li><li>
<p>X = SQL compat</p>
</li><li>
<p>@ = Timestamp</p>
</li><li>
<p>O = Double</p>
</li><li><ul><li>
<p>= Autoincrement</p>
</li></ul>
</li></ul>

<h2 id="label-Limitations">Limitations</h2>
<ul><li>
<p>DBF is read-only</p>
</li><li>
<p>Index files are not utilized</p>
</li></ul>

<h2 id="label-License">License</h2>

<p>Copyright © 2006-2024 Keith Morrison &lt;<a href="mailto:keithm@infused.org">keithm@infused.org</a>&gt;</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</div></div>

      <div id="footer">
  Generated on Wed Dec 27 10:30:38 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.3.0).
</div>

    </div>
  </body>
</html>